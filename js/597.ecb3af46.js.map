{"version":3,"file":"js/597.ecb3af46.js","mappings":"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","sources":["webpack://vue_w6/./node_modules/mitt/dist/mitt.mjs","webpack://vue_w6/./src/libs/emitter.js","webpack://vue_w6/./src/views/CartView.vue","webpack://vue_w6/./src/views/CartView.vue?73a2"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from \"mitt\";\n\nconst emitter = mitt();\n\nexport default emitter;\n","<template>\n  <div class=\"container\">\n    <h1 class=\"mt-4\">購物車</h1>\n    <table class=\"table mt-4\">\n      <thead>\n        <tr>\n          <td></td>\n          <td>品名</td>\n          <td class=\"text-center\" width=\"20%\">數量/單位</td>\n          <td class=\"text-end\">單價</td>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\n          <td>\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-danger\"\n              @click=\"deleteCartItem(item.id)\"\n            >\n              x\n            </button>\n          </td>\n          <td>{{ item.product.title }}</td>\n          <td class=\"text-center\">\n            <label :for=\"item.id\" class=\"input-group input-group-sm\">\n              <input\n                :id=\"item.id\"\n                type=\"number\"\n                class=\"form-control\"\n                min=\"1\"\n                v-model=\"item.qty\"\n                @change=\"updateCartItem(item)\"\n                :disabled=\"isLoadingItem === item.id\"\n              />\n              <span class=\"input-group-text\">{{ item.product.unit }}</span>\n            </label>\n          </td>\n          <td class=\"text-end\">{{ item.product.price }} 元</td>\n        </tr>\n      </tbody>\n      <tfoot>\n        <tr class=\"text-end\">\n          <td colspan=\"3\">總計</td>\n          <td>{{ cartData.final_total }} 元</td>\n        </tr>\n      </tfoot>\n    </table>\n    <div class=\"text-end\">\n      <button\n        type=\"button\"\n        class=\"btn btn-outline-danger\"\n        @click=\"deleteAllCart\"\n      >\n        清空購物車\n      </button>\n    </div>\n    <!-- 表單 -->\n    <div class=\"row justify-content-center\">\n      <v-form\n        class=\"col-10\"\n        v-slot=\"{ errors }\"\n        @submit=\"createOrder\"\n        ref=\"form\"\n      >\n        <div class=\"mb-3\">\n          <label for=\"email\" class=\"form-label\">Email</label>\n          <v-field\n            type=\"email\"\n            name=\"email\"\n            class=\"form-control\"\n            id=\"email\"\n            placeholder=\"請輸入Email\"\n            :class=\"{ 'is-invalid': errors['email'] }\"\n            rules=\"email|required\"\n            v-model=\"form.user.email\"\n          ></v-field>\n          <error-message name=\"email\" class=\"invalid-feedback\"></error-message>\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"姓名\" class=\"form-label\">收件人姓名</label>\n          <v-field\n            type=\"name\"\n            name=\"姓名\"\n            class=\"form-control\"\n            id=\"姓名\"\n            placeholder=\"請輸入收件人姓名\"\n            :class=\"{ 'is-invalid': errors['姓名'] }\"\n            rules=\"required\"\n            v-model=\"form.user.name\"\n          ></v-field>\n          <error-message name=\"姓名\" class=\"invalid-feedback\"></error-message>\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"電話\" class=\"form-label\">收件人電話</label>\n          <v-field\n            type=\"tel\"\n            name=\"電話\"\n            class=\"form-control\"\n            id=\"電話\"\n            placeholder=\"請輸入收件人電話\"\n            :class=\"{ 'is-invalid': errors['電話'] }\"\n            rules=\"required|min:9|max:10\"\n            v-model=\"form.user.tel\"\n          ></v-field>\n          <error-message name=\"電話\" class=\"invalid-feedback\"></error-message>\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"地址\" class=\"form-label\">收件人地址</label>\n          <v-field\n            type=\"text\"\n            name=\"地址\"\n            class=\"form-control\"\n            id=\"地址\"\n            placeholder=\"請輸入收件人地址\"\n            :class=\"{ 'is-invalid': errors['地址'] }\"\n            rules=\"required\"\n            v-model=\"form.user.address\"\n          ></v-field>\n          <error-message name=\"地址\" class=\"invalid-feedback\"></error-message>\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"message\" class=\"form-label\">留言</label>\n          <textarea\n            class=\"form-control\"\n            id=\"message\"\n            rows=\"3\"\n            v-model=\"form.message\"\n          ></textarea>\n        </div>\n        <div class=\"text-end\">\n          <button\n            type=\"submit\"\n            class=\"btn btn-primary\"\n            :disabled=\"\n              Object.keys(errors).length > 0 || cartData.carts.length === 0\n            \"\n          >\n            送出\n          </button>\n        </div>\n      </v-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from \"@/libs/emitter\";\n\nexport default {\n  data() {\n    return {\n      cartData: {\n        carts: [],\n      },\n      isLoadingItem: \"\",\n      form: {\n        user: {\n          email: \"\",\n          name: \"\",\n          tel: \"\",\n          address: \"\",\n        },\n        message: \"\",\n      },\n    };\n  },\n  methods: {\n    getCart() {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PAITH}/cart`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.cartData = res.data.data;\n        })\n        .catch((error) => {\n          console.log(error.data);\n        });\n    },\n    updateCartItem(item) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PAITH}/cart/${item.id}`;\n      const data = {\n        data: {\n          product_id: item.product_id,\n          qty: item.qty,\n        },\n      };\n      this.isLoadingItem = item.id;\n      this.$http\n        .put(url, data)\n        .then(() => {\n          this.isLoadingItem = \"\";\n          this.getCart();\n        })\n        .catch((error) => {\n          console.log(error.response.data);\n        });\n    },\n    deleteCartItem(id) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PAITH}/cart/${id}`;\n      this.$http\n        .delete(url)\n        .then(() => {\n          this.getCart();\n          emitter.emit(\"get-cart\");\n        })\n        .catch((error) => {\n          console.log(error.response.data);\n        });\n    },\n    deleteAllCart() {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PAITH}/carts`;\n      this.$http\n        .delete(url)\n        .then(() => {\n          this.getCart();\n          emitter.emit(\"get-cart\");\n        })\n        .catch((error) => {\n          // eslint-disable-next-line no-alert\n          alert(error.response.data.message);\n        });\n    },\n    createOrder() {\n      console.log(\"send\");\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PAITH}/order`;\n      const data = {\n        data: this.form,\n      };\n      this.$http\n        .post(url, data)\n        .then((res) => {\n          alert(res.data.message);\n          this.$refs.form.resetForm();\n          this.form.message = \"\";\n          this.getCart();\n        })\n        .catch((error) => {\n          console.log(error.data);\n        });\n    },\n  },\n  mounted() {\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=616af04a\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\OneDrive\\\\桌面\\\\vue_w6\\\\vue_w6\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["n","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","class","_createElementVNode","width","colspan","for","_createElementBlock","_hoisted_2","_hoisted_4","_Fragment","_renderList","$data","carts","item","key","id","type","onClick","$options","_hoisted_5","_toDisplayString","product","title","min","qty","$event","onChange","disabled","unit","price","_hoisted_12","final_total","_createVNode","_component_v_form","onSubmit","ref","errors","_hoisted_16","_component_v_field","name","placeholder","rules","user","email","_component_error_message","_hoisted_18","_hoisted_20","tel","_hoisted_22","address","_hoisted_24","rows","message","Object","keys","length","_hoisted_26","data","cartData","isLoadingItem","form","methods","getCart","url","this","$http","then","res","catch","error","console","log","updateCartItem","product_id","put","response","deleteCartItem","delete","deleteAllCart","alert","createOrder","post","$refs","resetForm","mounted","__exports__","render"],"sourceRoot":""}